webpackJsonp([9],{"7BSa":function(e,a){},iT3r:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("mvHQ"),r=t.n(l),i=t("Wxq9"),o={data:function(){return{loading:!1,fileList:[],form:{chinaArea:[],createdTime:[]},tableData:[],tablePageData:[],currentPage:1,total:0,dialogVisible:!1,dialogIndex:-1,dialogForm:{id:"",chinaArea:[],address:"",bedRoom:"",orientation:"",createdTime:"",editTime:"",height:"",maxHeight:"",area:"",price:"",lease:"",tags:[],imgUrl:[],status:!1},dialogFormArea:[]}},methods:{clearFormCreatedTime:function(){null==this.form.createdTime&&(this.form.createdTime=[]),this.getTablePageData("click")},handleRemove:function(e,a){for(var t in this.dialogForm.imgUrl)this.dialogForm.imgUrl[t].uid==e.uid&&this.dialogForm.imgUrl.splice(t,1)},handleChange:function(e){var a=this,t=new FileReader;t.onload=function(){var l=t.result;a.dialogForm.imgUrl.push({name:e.name,uid:e.uid,url:l})},t.readAsDataURL(e.raw)},dialogClose:function(){this.dialogForm={id:"",chinaArea:[],address:"",bedRoom:"",orientation:"",createdTime:"",editTime:"",height:"",maxHeight:"",area:"",price:"",lease:"",tags:[],imgUrl:[],status:!1},this.dialogIndex=-1},dialogOpen:function(e,a){this.$refs.form.resetFields();var t=a;console.log(a),localStorage.setItem("row",r()(t)),this.dialogForm=a?JSON.parse(localStorage.getItem("row")):this.dialogForm,this.dialogIndex=a?e:-1,this.dialogVisible=!0},dialogAdd:function(e,a){var t=this;this.$refs[a].validate(function(a){if(!a)return console.log("error submit!!"),!1;if(t.dialogForm.editTime=t.getTime(new Date),console.log(t.dialogForm.editTime),-1==e)t.dialogForm.id=t.tableData.length>0?parseInt(t.tableData[t.tableData.length-1].id)+1:1,t.tableData.push(t.dialogForm);else for(var l in t.tableData)t.dialogForm.id==t.tableData[l].id&&(t.tableData[l]=t.dialogForm);localStorage.setItem("tableData",r()(t.tableData)),t.getTablePageData(),t.dialogVisible=!1})},handleDelete:function(e,a){var t=this;t.$confirm("确定删除这条数据吗?","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e in t.tableData)a.id==t.tableData[e].id&&t.tableData.splice(e,1);localStorage.setItem("tableData",r()(t.tableData)),t.getTablePageData()})},handleCurrentChange:function(e){this.currentPage=e,this.getTablePageData()},getTime:function(e){var a=e.getFullYear(),t=e.getMonth()+1;t=t<10?"0"+t:t;var l=e.getDate();l=l<10?"0"+l:l;var r=e.getHours();r=r<10?"0"+r:r;var i=e.getMinutes();i=i<10?"0"+i:i;var o=e.getSeconds();return a+"-"+t+"-"+l+" "+r+":"+i+":"+(o=o<10?"0"+o:o)},getTablePageData:function(e){var a=this;a.loading=!0,a.tableData=localStorage.getItem("tableData")?JSON.parse(localStorage.getItem("tableData")):[];var t=[];for(var l in a.tableData){var r=!0;a.form.chinaArea.length>0&&(a.equar(a.form.chinaArea,a.tableData[l].chinaArea)||(r=!1)),a.form.createdTime.length>0&&null!=a.form.createdTime&&(a.getTimeStamp(a.form.createdTime[0])<a.getTimeStamp(a.tableData[l].editTime)&&a.getTimeStamp(a.form.createdTime[1])>a.getTimeStamp(a.tableData[l].editTime)||(r=!1)),r&&t.push(a.tableData[l])}setTimeout(function(){a.loading=!1,a.total=t.length,a.currentPage=e?1:a.currentPage,a.tablePageData=t.splice(5*(a.currentPage-1),5)},500)},equar:function(e,a){if(e.length!==a.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==a[t])return!1;return!0},getTimeStamp:function(e){return new Date(e).getTime()}},created:function(){this.dialogFormArea=i.regionData,this.getTablePageData()},mounted:function(){}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("div",[t("el-form",{ref:"form",staticStyle:{display:"flex"},attrs:{model:e.form,"label-width":"80px",size:"medium"}},[t("el-form-item",{attrs:{label:"选择城市"}},[t("el-cascader",{attrs:{clearable:"true","expand-trigger":"hover",options:e.dialogFormArea},on:{change:function(a){e.getTablePageData("click")}},model:{value:e.form.chinaArea,callback:function(a){e.$set(e.form,"chinaArea",a)},expression:"form.chinaArea"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"创建时间"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.clearFormCreatedTime},model:{value:e.form.createdTime,callback:function(a){e.$set(e.form,"createdTime",a)},expression:"form.createdTime"}})],1)],1),e._v(" "),t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-button",{attrs:{icon:"el-icon-plus",size:"medium"},on:{click:e.dialogOpen}},[e._v("添加房源")])],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tablePageData,"element-loading-text":"加载中","element-loading-background":"rgba(241, 245, 248, 0.5)"}},[t("el-table-column",{attrs:{label:"ID",prop:"id",width:"80"}}),e._v(" "),t("el-table-column",{attrs:{label:"详细地址","show-overflow-tooltip":"",prop:"address"}}),e._v(" "),t("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.imgUrl.length>0?t("img",{staticStyle:{width:"120px",height:"60px"},attrs:{src:a.row.imgUrl[0].url}}):t("span",[e._v("暂无图片")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"面积",prop:"area"}}),e._v(" "),t("el-table-column",{attrs:{label:"价格",prop:"price"}}),e._v(" "),t("el-table-column",{attrs:{label:"楼层",prop:"height"}}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间","show-overflow-tooltip":"",prop:"editTime"}}),e._v(" "),t("el-table-column",{attrs:{label:"发布状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{size:"medium",type:a.row.status?"success":"danger"}},[e._v(e._s(a.row.status?"已发布":"未发布"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{"margin-right":"10px!important"},attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(t){e.dialogOpen(a.$index,a.row)}}}),e._v(" "),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){e.handleDelete(a.$index,a.row)}}})]}}])})],1),e._v(" "),t("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":5,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}}),e._v(" "),t("el-dialog",{attrs:{title:-1==e.dialogIndex?"新增房源":"修改房源",visible:e.dialogVisible,width:"600px"},on:{close:e.dialogClose,"update:visible":function(a){e.dialogVisible=a}}},[t("div",[t("el-form",{ref:"form",attrs:{model:e.dialogForm,"label-width":"80px",size:"mini"}},[t("el-row",[t("el-form-item",{attrs:{label:"是否发布"}},[t("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",height:"26px"}},[t("el-switch",{staticStyle:{display:"block"},model:{value:e.dialogForm.status,callback:function(a){e.$set(e.dialogForm,"status",a)},expression:"dialogForm.status"}})],1)]),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"省市区",prop:"chinaArea",rules:e.$rules.require}},[t("el-cascader",{attrs:{"expand-trigger":"hover",options:e.dialogFormArea},model:{value:e.dialogForm.chinaArea,callback:function(a){e.$set(e.dialogForm,"chinaArea",a)},expression:"dialogForm.chinaArea"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"详细地址",prop:"address",rules:e.$rules.require}},[t("el-input",{staticStyle:{width:"193px!important"},attrs:{maxlength:"30"},model:{value:e.dialogForm.address,callback:function(a){e.$set(e.dialogForm,"address",a)},expression:"dialogForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"建筑时间",prop:"createdTime",rules:e.$rules.require}},[t("el-date-picker",{staticStyle:{width:"193px!important"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.dialogForm.createdTime,callback:function(a){e.$set(e.dialogForm,"createdTime",a)},expression:"dialogForm.createdTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"房间朝向",prop:"orientation",rules:e.$rules.require}},[t("el-select",{staticStyle:{width:"193px!important"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.orientation,callback:function(a){e.$set(e.dialogForm,"orientation",a)},expression:"dialogForm.orientation"}},e._l(["朝东","朝南","朝西","朝北","南北"],function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"租赁方式",prop:"lease",rules:e.$rules.require}},[t("el-select",{staticStyle:{width:"193px!important"},attrs:{placeholder:"请选择"},model:{value:e.dialogForm.lease,callback:function(a){e.$set(e.dialogForm,"lease",a)},expression:"dialogForm.lease"}},e._l(["整租","合租"],function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"所在楼层",prop:"height",rules:e.$rules.require}},[t("el-input-number",{attrs:{min:1,max:30,label:""},model:{value:e.dialogForm.height,callback:function(a){e.$set(e.dialogForm,"height",a)},expression:"dialogForm.height"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"总楼层",prop:"maxHeight",rules:e.$rules.require}},[t("el-input-number",{attrs:{min:1,max:30,label:""},model:{value:e.dialogForm.maxHeight,callback:function(a){e.$set(e.dialogForm,"maxHeight",a)},expression:"dialogForm.maxHeight"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"卧室数量",prop:"bedRoom",rules:e.$rules.require}},[t("el-input-number",{attrs:{min:1,max:4,label:""},model:{value:e.dialogForm.bedRoom,callback:function(a){e.$set(e.dialogForm,"bedRoom",a)},expression:"dialogForm.bedRoom"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"面积",prop:"area",rules:e.$rules.require}},[t("el-input-number",{attrs:{min:1,max:200,label:""},model:{value:e.dialogForm.area,callback:function(a){e.$set(e.dialogForm,"area",a)},expression:"dialogForm.area"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"定价",prop:"price",rules:e.$rules.require}},[t("el-input-number",{attrs:{min:1,max:5e3,label:""},model:{value:e.dialogForm.price,callback:function(a){e.$set(e.dialogForm,"price",a)},expression:"dialogForm.price"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"标签"}},[t("el-checkbox-group",{model:{value:e.dialogForm.tags,callback:function(a){e.$set(e.dialogForm,"tags",a)},expression:"dialogForm.tags"}},[t("el-checkbox",{attrs:{label:"集体供暖",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"独立阳台",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"光照充足",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"独立卫生间",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"空调",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"精装修",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"近地铁",name:"tags"}}),e._v(" "),t("el-checkbox",{attrs:{label:"随时看房",name:"tags"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"图片"}},[t("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{limit:"2",action:"","on-change":e.handleChange,"on-remove":e.handleRemove,"file-list":e.dialogForm.imgUrl,"list-type":"picture-card","auto-upload":!1}},[t("el-button",{attrs:{slot:"trigger",size:"mini"},slot:"trigger"},[e._v("选取图片")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，最多上传两张")])],1)],1),e._v(" "),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.dialogAdd(e.dialogIndex,"form")}}},[e._v(e._s(""===e.dialogForm.address?"保存":"修改"))]),e._v(" "),t("el-button",{attrs:{size:"small"},on:{click:function(a){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)])],1)])},staticRenderFns:[]};var s=t("VU/8")(o,n,!1,function(e){t("7BSa")},"data-v-e2f59054",null);a.default=s.exports}});
//# sourceMappingURL=9.cc918735e7826cd81841.js.map