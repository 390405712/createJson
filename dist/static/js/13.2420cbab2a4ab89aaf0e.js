webpackJsonp([13],{"9y54":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("NTvx"),n={name:"koa2",data:function(){return{tableData:[],addForm:{},editForm:{},dialogAdd:!1,dialogEdit:!1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}]}}},watch:{},mounted:function(){this.query()},methods:{resetForm:function(e){this.$refs[e].resetFields()},query:function(){var e=this;o.a.query().then(function(t){200==t.status&&(e.tableData=t.data)})},find:function(e,t){var a=this;o.a.find(t).then(function(e){200==e.status&&(a.editForm=e.data,a.dialogEdit=!0)})},add:function(){var e=this;o.a.add(e.addForm).then(function(t){200==t.status&&(e.dialogAdd=!1,e.$message({message:"添加成功",type:"success"}),e.query())})},update:function(){var e=this;o.a.update(e.editForm).then(function(t){200==t.status&&(e.dialogEdit=!1,e.$message({message:"修改成功",type:"success"}),e.query())})},del:function(e,t){var a=this;o.a.del({id:t}).then(function(t){200==t.status&&(a.$message({message:"删除成功",type:"success"}),a.tableData.splice(e,1))})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-button",{on:{click:function(t){e.dialogAdd=!0}}},[e._v("添加")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机",prop:"phone"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createdAt"}}),e._v(" "),a("el-table-column",{attrs:{label:"最后修改时间",prop:"updatedAt"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.find(t.$index,t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.$index,t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.dialogAdd,width:"30%"},on:{"update:visible":function(t){e.dialogAdd=t},closed:function(t){e.resetForm("addForm")}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"status-icon":"",rules:e.rules,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{attrs:{type:"text"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.add()}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("addForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.dialogEdit,width:"30%"},on:{"update:visible":function(t){e.dialogEdit=t},closed:function(t){e.resetForm("editForm")}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"status-icon":"",rules:e.rules,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"phone"}},[a("el-input",{attrs:{type:"text"},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update()}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("editForm")}}},[e._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,i,!1,function(e){a("pZUK")},"data-v-65cfa048",null);t.default=l.exports},pZUK:function(e,t){}});